window.YWM_PRODUCTS = [
  {
    id:'p01',
    name:'Yarned Charm Keychain',
    price:7.99,
    category:'accessories',
    rating:4.5,
    images:[
      'https://i.etsystatic.com/37873955/r/il/a09bb7/6607797017/il_570xN.6607797017_1qtk.jpg'
    ],
    desc:'Handmade crochet keychain — lightweight and perfect for bags or keys.'
  },
  {
    id:'p02',
    name:'Everyday Crochet Bag',
    price:32.00,
    category:'bags',
    rating:4.6,
    images:[
      'https://plus.unsplash.com/premium_photo-1689247409718-48408527fe97?q=80&w=687&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'
    ],
    desc:'Spacious and stylish crochet bag with sturdy straps.'
  },
  {
    id:'p03',
    name:'Sunset Bucket Hat',
    price:18.50,
    category:'accessories',
    rating:4.4,
    images:[
      'https://images.unsplash.com/photo-1737053618385-d263770d51f5?q=80&w=687&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'
    ],
    desc:'Trendy handmade crochet bucket hat, breathable and comfy.'
  },
  {
    id:'p04',
    name:'Bloom Crochet Flower',
    price:6.99,
    category:'decor',
    rating:4.7,
    images:[
      'https://images.unsplash.com/photo-1700171518313-5dd219beaaa6?q=80&w=687&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'
    ],
    desc:'Delicate crochet flower — use as brooch, decor, or hair pin.'
  },
  {
    id:'p05',
    name:'Cozy Crochet Shrug',
    price:39.00,
    category:'clothing',
    rating:4.6,
    images:[
      'https://images.unsplash.com/photo-1434389677669-e08b4cac3105?q=80&w=705&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'
    ],
    desc:'Lightweight shrug — perfect layering for breezy days.'
  },
  {
    id:'p06',
    name:'Classic Tote Bag',
    price:28.75,
    category:'bags',
    rating:4.5,
    images:[
      'https://images.unsplash.com/photo-1629736329185-086161cda231?q=80&w=687&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'
    ],
    desc:'Durable crochet tote bag with modern, minimalist look.'
  },
  {
    id:'p07',
    name:'Warm Crochet Sweater',
    price:54.00,
    category:'clothing',
    rating:4.8,
    images:[
      'https://plus.unsplash.com/premium_photo-1755534537657-0a8a9bf1cc46?q=80&w=687&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'
    ],
    desc:'Snuggly handmade sweater stitched with love.'
  },
  {
    id:'p08',
    name:'Cozy Slippers',
    price:19.50,
    category:'clothing',
    rating:4.7,
    images:[
      'https://images.unsplash.com/photo-1581277559401-e3e65cda94cb?q=80&w=687&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'
    ],
    desc:'Soft and warm crochet slippers for ultimate comfort.'
  },
  {
    id:'p09',
    name:'Crochet Mobile Pouch',
    price:15.00,
    category:'accessories',
    rating:4.4,
    images:[
      'https://plus.unsplash.com/premium_photo-1727427850057-74de21f91bb8?q=80&w=687&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'
    ],
    desc:'Handmade pouch to keep your phone safe and stylish.'
  },
  {
    id:'p10',
    name:'Braided Yarn Bracelet',
    price:8.50,
    category:'jewelry',
    rating:4.5,
    images:[
    'https://images.unsplash.com/photo-1702817058945-181086f94c0b?q=80&w=627&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'
    ],
    desc:'Adjustable crochet bracelet — casual and chic.'
  },
  {
    id:'p11',
    name:'Delicate Crochet Ring',
    price:5.99,
    category:'jewelry',
    rating:4.3,
    images:[
      'https://plus.unsplash.com/premium_photo-1675116866483-56a4e2f824f6?q=80&w=687&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'
    ],
    desc:'Minimal crochet ring with soft yarn textures.'
  },
  {
    id:'p12',
    name:'Laptop Cover',
    price:36.00,
    category:'accessories',
    rating:4.6,
    images:[
      'https://images.unsplash.com/photo-1708447135262-850979354fcf?q=80&w=687&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'
    ],
    desc:'Protective crochet laptop cover with snug fit.'
  }
];

function formatPrice(n){ return '$' + n.toFixed(2); }
function starIcons(r){
  const full = Math.floor(r), half = r - full >= 0.5;
  let s = '';
  for (let i=0;i<full;i++) s += '★';
  if (half) s += '☆';
  return s.padEnd(5, '☆');
}

document.addEventListener('DOMContentLoaded', () => {
  const grid = document.getElementById('featured-grid');
  if (grid){
    const picks = [...YWM_PRODUCTS].sort((a,b)=>b.rating-a.rating).slice(0,3);
    for (const p of picks){
      const card = document.createElement('a');
      card.href = 'product.html?id=' + p.id;
      card.className = 'card block';
      card.innerHTML = `
        <img class="card-img" src="${p.images[0]}" alt="${p.name}">
        <div class="card-body">
          <h3 class="font-semibold text-white">${p.name}</h3>
          <div class="mt-1 text-sm text-slate-300/85">${starIcons(p.rating)} <span class="ml-2">${p.rating}</span></div>
          <div class="mt-2 price">${formatPrice(p.price)}</div>
          <div class="mt-3"><span class="btn-ghost">Shop Now</span></div>
        </div>`;
      grid.appendChild(card);
    }
  }
});

document.addEventListener('DOMContentLoaded', () => {
  const grid = document.getElementById('product-grid');
  if (grid){
    const categorySel = document.getElementById('filter-category');
    const sortSel = document.getElementById('sort-by');
    function render(){
      grid.innerHTML = '';
      let items = [...YWM_PRODUCTS];
      const cat = categorySel.value;
      if (cat !== 'all') items = items.filter(p=>p.category===cat);
      const s = sortSel.value;
      if (s==='price-asc') items.sort((a,b)=>a.price-b.price);
      if (s==='price-desc') items.sort((a,b)=>b.price-a.price);
      if (s==='name-asc') items.sort((a,b)=>a.name.localeCompare(b.name));
      if (s==='popularity') items.sort((a,b)=>b.rating-a.rating);
      for (const p of items){
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
          <a href="product.html?id=${p.id}"><img class="card-img" src="${p.images[0]}" alt="${p.name}"></a>
          <div class="card-body">
            <a href="product.html?id=${p.id}" class="font-semibold text-white hover:underline">${p.name}</a>
            <div class="mt-1 text-sm text-slate-300/85">${starIcons(p.rating)} <span class="ml-2">${p.rating}</span></div>
            <div class="mt-2 price">${formatPrice(p.price)}</div>
            <button class="btn-primary mt-3" data-add="${p.id}">Add to Cart</button>
          </div>`;
        grid.appendChild(card);
      }
    }
    render();
    categorySel.addEventListener('change', render);
    sortSel.addEventListener('change', render);
    grid.addEventListener('click', e=>{
      const id = e.target?.dataset?.add;
      if (!id) return;
      const item = YWM_PRODUCTS.find(x=>x.id===id);
      addToCart(item,1);
    });
  }
});


window.renderProductDetail = function(){
  const params = new URLSearchParams(location.search);
  const id = params.get('id') || 'p01';
  const p = YWM_PRODUCTS.find(x=>x.id===id) || YWM_PRODUCTS[0];

  document.getElementById('product-name').textContent = p.name;
  document.getElementById('product-desc').textContent = p.desc;
  document.getElementById('product-price').textContent = formatPrice(p.price);
  document.getElementById('rating-stars').textContent = starIcons(p.rating);
  document.getElementById('rating-value').textContent = p.rating.toFixed(1);

  const main = document.getElementById('product-image');
  main.src = p.images[0];
  const thumbs = document.getElementById('thumbs');
  p.images.forEach((src,i)=>{
    const t = document.createElement('img');
    t.src = src; t.alt = p.name + ' ' + (i+1);
    t.className = 'aspect-square w-full rounded-xl border border-white/10 cursor-pointer object-cover';
    t.addEventListener('click', ()=>{ main.src = src; });
    thumbs.appendChild(t);
  });

  document.getElementById('add-to-cart').addEventListener('click', ()=>{
    const qty = Math.max(1, parseInt(document.getElementById('qty').value||'1',10));
    addToCart(p, qty);
  });
};
document.addEventListener("DOMContentLoaded", () => {
  const links = document.querySelectorAll(".nav-link");

  
  links.forEach(link => {
    if (link.href === window.location.href) {
      link.classList.add("active");
    }
  });

  
  links.forEach(link => {
    link.addEventListener("click", function () {
      links.forEach(l => l.classList.remove("active"));
      this.classList.add("active");
    });
  });
  const menuToggle = document.getElementById("menu-toggle");
const mobileMenu = document.getElementById("mobile-menu");

if (menuToggle && mobileMenu) {
  menuToggle.addEventListener("click", () => {
    mobileMenu.classList.toggle("hidden");
  });
}
});
